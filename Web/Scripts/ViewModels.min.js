var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},ViewModels;(function(n){(function(n){var t=function(){function n(n){this.options=n,this.form=$("form")}return n.prototype.initialize=function(){ko.applyBindings(this)},n.prototype.create=function(){return this.form.valid()?($.ajax(this.options.apiPostUrl,{type:"POST",contentType:"application/json;charset=utf-8",data:this.toJSON(),accepts:"JSON",context:this,success:this.onResourceCreated,error:this.onError}),!1):!1},n.prototype.toJSON=function(){return"{}"},n.prototype.onResourceCreated=function(n,t,i){alert(i.statusText)},n.prototype.onError=function(n,t,i){(new Utils.ErrorHandler).webApiError(n,t,i)},n}(),i,r;n.NewResourceViewModel=t,i=function(n){function t(t){n.call(this,t),this.options=t,this.suggestOn=!0;var i=this;this.Name=ko.observable(""),this.Vision=ko.observable(""),this.Code=ko.computed({read:i.getCode,write:i.setManualCode,owner:this})}return __extends(t,n),t.prototype.toJSON=function(){return JSON.stringify({Code:this.getCode(),Name:this.Name(),Vision:this.Vision()})},t.prototype.onResourceCreated=function(n){window.location.href=this.options.successRedirectUrl.replace("[id]",n.Code)},t.prototype.getCode=function(){return this.suggestOn&&(this.code=this.Name().replace(/[[\]{}()*+?.,\\^$|#\s]+/g,"_")),this.code},t.prototype.setManualCode=function(n){this.suggestOn=!1,this.code=n},t}(t),n.NewProjectViewModel=i,r=function(){function n(){this.projectName="",this.projectVision=""}return n.prototype.initialize=function(){var n=this;$.ajax("/api/project/"+Utils.UriHelper.currentFile(),{type:"GET",accepts:"JSON",context:this,success:function(t){n.projectName=t.Name,ko.applyBindings(this),document.title=t.Name+" - Dashboard"},error:function(n,t,i){(new Utils.ErrorHandler).webApiError(n,t,i)}})},n}(),n.DashboardViewModel=r})(n.Project||(n.Project={}));var t=n.Project})(ViewModels||(ViewModels={}))